Note: Unnecessary use of -X or --request, POST is already inferred.
* Host localhost:5001 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
*   Trying [::1]:5001...
* Immediate connect fail for ::1: Cannot assign requested address
*   Trying 127.0.0.1:5001...
* Connected to localhost (127.0.0.1) port 5001
> POST /api/truth/analyze-group HTTP/1.1
> Host: localhost:5001
> User-Agent: curl/8.7.1
> Accept: */*
> Content-Type: application/json
> Content-Length: 52
> 
* upload completely sent off: 52 bytes
< HTTP/1.1 500 Internal Server Error
< Content-Security-Policy: default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests
< Cross-Origin-Opener-Policy: same-origin
< Cross-Origin-Resource-Policy: same-origin
< Origin-Agent-Cluster: ?1
< Referrer-Policy: no-referrer
< Strict-Transport-Security: max-age=15552000; includeSubDomains
< X-Content-Type-Options: nosniff
< X-DNS-Prefetch-Control: off
< X-Download-Options: noopen
< X-Frame-Options: SAMEORIGIN
< X-Permitted-Cross-Domain-Policies: none
< X-XSS-Protection: 0
< Vary: Origin
< Access-Control-Allow-Credentials: true
< RateLimit-Policy: 300;w=60
< RateLimit-Limit: 300
< RateLimit-Remaining: 299
< RateLimit-Reset: 60
< Content-Type: application/json; charset=utf-8
< Content-Length: 1012
< ETag: W/"3f4-hSpd3vnpqZQOPRvqsEAvtGl+Zaw"
< Date: Wed, 27 Aug 2025 23:39:46 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< 
* Connection #0 to host localhost left intact
{"error":"app.post is not a function","code":"INTERNAL_ERROR","details":"TypeError: app.post is not a function\n    at mountTruthRoutes (/home/runner/workspace/server/routes/truth.ts:12:7)\n    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/runner/workspace/node_modules/express/lib/router/index.js:328:13)\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)\n    at /home/runner/workspace/node_modules/express/lib/router/index.js:646:15\n    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/runner/workspace/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/runner/workspace/node_modules/express/lib/router/index.js:47:12)"}~/workrg -n "analyze-group|analy[z|s]e-group|truth.*group" server/routes server/services || true|| true
server/routes/groups.ts
12:  await pool.query(`insert into truth_checks (group_id, status, created_at) values ($1,'pending', now())`, [groupId]);

server/services/truth/group.ts
58:  // 4) Persist into truth_checks (one row per group run)
60:    `insert into truth_checks (group_id, status, started_at, result, created_at)
68:    `insert into truth_evidence (group_id, payload)